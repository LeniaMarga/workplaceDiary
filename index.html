<!DOCTYPE html>
<html lang="en">
<?xml version="1.0" encoding="utf-8"?>

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>AffectiveWorkplace</title>

  <!-- Custom fonts for this theme -->
  <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet" type="text/css">

  <!-- Theme CSS -->
  <link href="css/freelancer.css" rel="stylesheet">
  <link rel="stylesheet" href="emojionearea/dist/emojionearea.css">
  <link rel="stylesheet" href="css/simple-zoomer.css">

</head>

<body id="page-top">

  <!-- Navigation -->
  <nav class="navbar navbar-expand-lg bg-secondary text-uppercase fixed-top" id="mainNav">
    <div class="container">
      <a class="navbar-brand js-scroll-trigger" href="#page-top">
          <img border="0" alt="W3Schools" src="./img/AffectiveWorkplaceLogo.jpg" height="80">
      </a>
      <!-- <a class="navbar-brand js-scroll-trigger" href="#page-top">Towards the Ambient Workplace</a> -->
      <button class="navbar-toggler text-uppercase font-weight-bold bg-primary text-white rounded" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
        Menu
        <i class="fas fa-bars"></i>
      </button>
      <div class="collapse navbar-collapse" id="navbarResponsive">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item mx-0 mx-lg-1">
            <a class="nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger" href="#diary">The Diary Study</a>
          </li>
          <li class="nav-item mx-0 mx-lg-1">
            <a class="nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger" href="https://forms.gle/2NjTHsFFsbgToRK29">How to take part</a>
          </li>
          <li class="nav-item mx-0 mx-lg-1">
            <a class="nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger" href="mailto:E.K.Margariti2@newcastle.ac.uk">Contact me</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Masthead -->
  <header class="masthead bg-primary text-white" id="about">
     <div class="container d-flex flex-column">
       <h2>A diary study about your experience working at home & at the office</h2>
     </div>
     <div class="container d-flex flex-column">
           <p>The workplace is changing. Working from home became a necessity during <span style="color:  #ffc107db">Covid-19</span> pandemic, establishing what was an emerging tendency in many sectors.
            As our homes are transforming into workplaces, the ways and spaces we work are becoming more ambiguous, flexible and heterogenous than ever before.</p>
          <p style="margin-bottom:30px"> Purpose of this study is to gain insights on how people experience working from home during the pandemic and towards the transition to office spaces.</p>
     </div>
  </header>

  <section class="page-section" style="background-color:#ffc107" id="diary">
     <div class="container d-flex flex-column">
       <h2>Where are you working now? How do you experience it?</h2>
     </div>
     <div class="container d-flex flex-column">
          <p>Either working from home or at office, please fill in the fields below.
            Provide any additional information you wish to describe how your workspace is like, and reflect on your mood and emotional state while working.</p>
           <p style="margin-bottom:30px">It will only take 5 minutes of your time.</p>
       </div>
  </section>

  <!-- Dairy Section -->
  <section class="page-section">
    <div class="container">
      <h2 class="mb-0" style="color: #2c3e50">Your details</h2>
      <div class="row">
        <div class="col-lg-8 mx-auto">
                  <div class="control-group">
              <div class="form-group floating-label-form-group controls mb-0 pb-2">
                <label>Name</label>
                <input class="form-control" id="name" type="text" placeholder="Name" required="required" data-validation-required-message="Please enter your name.">
                <p class="help-block text-danger"></p>
              </div>
            </div>
            <div class="control-group">
              <div class="form-group floating-label-form-group controls mb-0 pb-2">
                <label>Email Address</label>
                <input class="form-control" id="email" type="email" placeholder="Email Address" required="required" data-validation-required-message="Please enter your email address.">
                <p class="help-block text-danger"></p>
              </div>
            </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ToolKit Section -->
  <section class="page-section" id="toolkit0">
    <div class="container" id="zoomed">
      <h2 style="color: #2c3e50">Where are you working right now?</span></h2>
      <div class="control-group">
        <div class="form-group floating-label-form-group controls mb-0 pb-2">
          <label>Place</label>
          <input class="form-control" id="placenow" type="text" placeholder="home office/ living room / desk / kitchen" required="required" data-validation-required-message="">
          <p class="help-block text-danger"></p>
        </div>
      </div>
    </div>
  </section>
  <section class="page-section" id="toolkit1">
    <div class="container" id="zoomed">
     <h2 style="color: #2c3e50">Upload one picture of your work area</h2>
     <h5 style="color: #2c3e50">Optionally annotate the picture to highlight how you personalized it</h5>
         <form action="/file-upload" class="dropzone dz-clickable" id="my-awesome-dropzone">
           <div class="dz-default dz-message">
             <button class="dz-button" type="button">Select file</button>
           </div>
         </form>
        <div style="margin-top:50px">
          <button type="submit" class="btn btn-primary btn-xl" id="uploadpic">Upload file</button>
     </div>
    </div>
  </section>

    <!-- Sliders section -->
<section class="page-section" id="toolkit3">
  <div class="container" id="zoomed">
    <h2 style="color: #2c3e50">How do you experience working?</h2>
      <div class="row text-center">
         <div class="col-lg-4">
          <h4>Your environment</h4>
          <br/>
          <div class="slidecontainer">
            <h4 style="color:darkgrey; font-size:20px; margin-bottom: 0px ">Temperature</h4>
             <div class='slider-title'>
                <h5>cold</h5>
                <h5>hot</h5>
             </div>
             <input type="range" min= "1" max="100" value="50" class="slider" id="temp">
         </div>
         <div class="slidecontainer">
           <h4 style="color:darkgrey; font-size:20px; margin-bottom: 0px ">Light</h4>
            <div class='slider-title'>
                <h5>dark</h5>
                <h5>light</h5>
             </div>
             <input type="range" min="1" max="100" value="50" class="slider" id="light">
         </div>
         <div class="slidecontainer">
           <h4 style="color:darkgrey; font-size:20px; margin-bottom: 0px">Noise</h4>
            <div class='slider-title'>
               <h5>noisy</h5>
               <h5>quiet</h5>
            </div>
            <input type="range" min="1" max="100" value="50" class="slider" id="noise">
         </div>
         <div class="slidecontainer">
           <h4 style="color:darkgrey; font-size:20px; margin-bottom: 0px ">Air Quality</h4>
           <div class='slider-title'>
              <h5>poor</h5>
              <h5>fresh</h5>
           </div>
           <input type="range" min="1" max="100" value="50" class="slider" id="air">
         </div>
      </div>

      <div class="col-lg-4">
          <h4>Yourself</h4>
          <br/>
         <div class="slidecontainer">
            <h4 style="color:darkgrey; font-size:20px; margin-bottom: 0px ">Mood</h4>
            <div class='slider-title'>
               <h5>negative</h5>
               <h5>positive</h5>
            </div>
            <input type="range" min="1" max="100" value="50" class="slider" id="mood">
         </div>
         <div class="slidecontainer">
           <h4 style="color:darkgrey; font-size:20px; margin-bottom: 0px ">Tension</h4>
             <div class='slider-title'>
                <h5>relaxed</h5>
                <h5>tensed</h5>
              </div>
              <input type="range" min="1" max="100" value="50" class="slider" id="stance">
          </div>
          <div class="slidecontainer">
              <h4 style="color:darkgrey; font-size:20px; margin-bottom: 0px ">Fatigue</h4>
              <div class='slider-title'>
                 <h5>tired</h5>
                 <h5>energetic</h5>
             </div>
            <input type="range" min="1" max="100" value="50" class="slider" id="fatigue">
          </div>
          <div class="slidecontainer">
              <h4 style="color:darkgrey; font-size:20px; margin-bottom: 0px ">Stress</h4>
              <div class='slider-title'>
                <h5>calm</h5>
                <h5>anxious</h5>
             </div>
            <input type="range" min="1" max="100" value="50" class="slider" id="stress">
         </div>
     </div>

     <div class="col-lg-4">
      <h4>Other aspects</h4>
      <br/>
       <div class="slidecontainer">
           <h4 style="color:darkgrey; font-size:20px; margin-bottom: 0px ">Distraction</h4>
              <div class='slider-title'>
                <h5>distracted</h5>
                <h5>focused</h5>
              </div>
             <input type="range" min="1" max="100" value="50" class="slider" id="distraction">
        </div>
        <div class="slidecontainer">
           <h4 style="color:darkgrey; font-size:20px; margin-bottom: 0px ">Motivation</h4>
             <div class='slider-title'>
                <h5>unmotivated</h5>
                <h5>motivated</h5>
             </div>
            <input type="range" min="1" max="100" value="50" class="slider" id="motivation">
        </div>
      </div>
    </div>
  </div>
</section>

<!-- emotion Section -->
<section class="page-section" id="toolkit2">
  <div class="container" id="zoomed">
    <h2 style="color: #2c3e50">How are you feeling today?</h2>
      <div class="row">
        <div class="col-lg-8 mx-auto">
          <form name="sentMessage" id="feelings" novalidate="novalidate">
            <div class="control-group">
              <div class="form-group floating-label-form-group controls mb-0 pb-2">
                <textarea id='emotionsarea' placeholder="had a bad sleep / low mood / all great"></textarea>
                <!-- <textarea class="form-control" id="message" rows="5" placeholder="Message" required="required" data-validation-required-message="Please enter a message."></textarea> -->
                <p class="help-block text-danger"></p>
              </div>
            </div>
            <br>
          </form>
        </div>
      </div>
    </div>
  </section>


<section class="page-section" >
  <div class="container">
    <h2 style="color: #2c3e50">Anything more that you would like to share?</h2>
    <div class="control-group">
      <div class="form-group floating-label-form-group controls mb-0 pb-2">
        <label>your thoughts</label>
        <input class="form-control" id="lastthoughts" type="text" placeholder="your thoughts" required="required" data-validation-required-message="">
        <p class="help-block text-danger"></p>
      </div>
    </div>
  </div>
</section>

<!-- Submit-->
<section class="page-section" id="contact">
  <div class="container">
    <div class="form-group">
        <button type="submit" class="btn btn-primary btn-xl" style="background-color:lightgrey; border:none" id="printall">Print</button>
    </div>
    <div class="form-group">
      <form novalidate="novalidate">
        <button type="submit" class="btn btn-primary btn-xl" id="submitall">Submit</button>
      </form>
    </div>
  </div>
</section>

<!-- Footer -->
<footer class="footer ">
  <div class="container ">
    <div class="row r">
      <!-- Footer Location -->
      <div class="col-lg-4 mb-lg-0 ">
        <h4 style="color:white">Contact me</h4>
        <p class="lead mb-0">Lenia Margariti</p>
        <p class="lead mb-0"><a class="js-scroll-trigger" style="color:#ffc107db" href="mailto:E.K.Margariti2@newcastle.ac.uk">E.K.Margariti2@newcastle.ac.uk</a></p>
        <p class="lead mb-0">+44 (0)7517084859</p>
        <p class="lead mb-0">Open Lab | Urban Sciences Building</p>
      </div>
    </div>
  </div>
</footer>


  <!-- Scroll to Top Button (Only visible on small and extra-small screen sizes) -->
  <div class="scroll-to-top d-lg-none position-fixed ">
    <a class="js-scroll-trigger d-block text-center text-white rounded" href="#page-top">
      <i class="fa fa-chevron-up"></i>
    </a>
  </div>
  <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/2.0.2/jquery.min.js"></script>
  <script type="text/javascript" src="js/jquery.simple.zoomer.js"></script>
  <script type="text/javascript" src="image-map-resizer/js/imageMapResizer.min.js "></script>
  <script type="text/javascript" src="emojionearea/dist/emojionearea.js"></script>
  <script type="text/javascript" src="./dropzone-5.7.0/dist/dropzone.js"></script>


  <script src="https://www.gstatic.com/firebasejs/7.9.3/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.9.3/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.9.3/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.9.3/firebase-database.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.9.3/firebase-storage.js"></script>
  <!--  Add SDKs for Firebase products that you want to use
       https://firebase.google.com/docs/web/setup#available-libraries -->
  <script src="https://www.gstatic.com/firebasejs/7.9.3/firebase-analytics.js"></script>


  <script>
    // Your web app's Firebase configuration
    var firebaseConfig = {
      apiKey: "AIzaSyAxb7pvZb-8U6ETWY-T0pGu96RNE7Khp54",
      authDomain: "uxdiaryusb.firebaseapp.com",
      databaseURL: "https://uxdiaryusb.firebaseio.com",
      projectId: "uxdiaryusb",
      storageBucket: "uxdiaryusb.appspot.com",
      messagingSenderId: "759851500962",
      appId: "1:759851500962:web:b9952634655743f89bdefb",
      measurementId: "G-RY2E4V5CX7"
    };
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    firebase.analytics();
    firebase.auth().signInAnonymously();


    // console.log(firebase);

    var database = firebase.database();
    var storage = firebase.storage();


    function writeUserData(name, email) {
      firebase.auth().onAuthStateChanged(function(user) {
        if (user) {
          // User is signed in.
          var isAnonymous = user.isAnonymous;
          var uid = user.uid;
          var startedAt = firebase.database.ServerValue.TIMESTAMP;

          console.log(uid);
          // ...
         firebase.database().ref('users').child(uid).push({
               username: name,
               email: email,
               time:  startedAt
          });

        } else {
                // User is signed out.
                // ...
        }
              // ...
      });

    }

    function writePlaceData(place) {
      firebase.auth().onAuthStateChanged(function(user) {
        if (user) {
          // User is signed in.
          var isAnonymous = user.isAnonymous;
          var uid = user.uid;
          var startedAt = firebase.database.ServerValue.TIMESTAMP;

          console.log(uid);
          // ...
         firebase.database().ref('places').child(uid).push({
               place: place,
               time:  startedAt
          });

        } else {
                // User is signed out.
                // ...
        }
              // ...
      });

    }

        function writeLastThoughts(lastthoughts) {
          firebase.auth().onAuthStateChanged(function(user) {
            if (user) {
              // User is signed in.
              var isAnonymous = user.isAnonymous;
              var uid = user.uid;
              var startedAt = firebase.database.ServerValue.TIMESTAMP;

              console.log(uid);
              // ...
             firebase.database().ref('lastthoughts').child(uid).push({
                   lastthoughts: lastthoughts,
                   time:  startedAt
              });

            } else {
                    // User is signed out.
                    // ...
            }
                  // ...
          });

        }

        // function writeDeskData(desk) {
        //   firebase.auth().onAuthStateChanged(function(user) {
        //     if (user) {
        //       // User is signed in.
        //       var isAnonymous = user.isAnonymous;
        //       var uid = user.uid;
        //       console.log(uid);
        //       var startedAt = firebase.database.ServerValue.TIMESTAMP;
        //      firebase.database().ref('desks').child(uid).push({
        //            desk:desk,
        //            time:  startedAt
        //       });
        //     } else {
        //           // User is signed out.
        //           // ...
        //     }
        //         // ...
        //   });
        // }


    function writeRangeData(percent, id) {
      firebase.auth().onAuthStateChanged(function(user) {
        if (user) {
          // User is signed in.
          var isAnonymous = user.isAnonymous;
          var uid = user.uid;
          console.log(uid);
          var startedAt = firebase.database.ServerValue.TIMESTAMP;

          firebase.database().ref('around ' + id).child(uid).push({
               percent: percent,
               id: id,
               time:  startedAt
          });
        } else {
              // User is signed out.
              // ...
        }
            // ...
      });
    }


    function writeEmo(emo) {
      firebase.auth().onAuthStateChanged(function(user) {
        if (user) {
          // User is signed in.
          var isAnonymous = user.isAnonymous;
          var uid = user.uid;
          console.log(uid);
          var startedAt = firebase.database.ServerValue.TIMESTAMP;
          firebase.database().ref('emo').child(uid).push({
               emo: emo,
               time:  startedAt
          });
        } else {
              // User is signed out.
              // ...
        }
            // ...
      });
    }

    function writePicture(picture) {
      firebase.auth().onAuthStateChanged(function(user) {
        if (user) {
          // User is signed in.
          var isAnonymous = user.isAnonymous;
          var uid = user.uid;
          console.log(uid);
          var startedAt = firebase.database.ServerValue.TIMESTAMP;
          firebase.database().ref('pictures').child(uid).push({
               picture: picture,
               time:  startedAt
          });
          firebase.storage().ref('pictures/' + picture.name).child(uid).put(picture);
        } else {
              // User is signed out.
              // ...
        }
            // ...
      });
    }

    Dropzone.options.myAwesomeDropzone = {

      // Prevents Dropzone from uploading dropped files immediately
      autoProcessQueue: false,
      uploadMultiple: true,
      parallelUploads: 100,
      maxFiles: 100,


      init: function() {

            myDropzone = this; // closure

        // You might want to show the submit button only when
        // files are dropped here:
        this.on("addedfile", function() {
          // Show submit button here and/or inform user to click it.
          myDropzone.processQueue();
        });
        this.on("sendingmultiple", function() {
  // Gets triggered when the form is actually being sent.
  // Hide the success button or the complete form.

         });
        this.on("successmultiple", function(files, response) {
  // Gets triggered when the files have successfully been sent.
  // Redirect user or notify of success.

         });
        this.on("errormultiple", function(files, response) {
  // Gets triggered when there was an error sending the files.
  // Maybe show form again, and notify user of error
         });


      }
    };


  </script>

  <script type="text/javascript">
        // map follows image
     $(document).ready(function() {
         $('map').imageMapResize();

         $("#zoom").zoomer({
           maxLimit: 100, //default value
           zoomingOrigin: (0, 0) //default value
         });


         //slider script
         $(function() {
         	var rangePercent = $('.slider').val();
         	$('.slider').on('change input', function() {
         		var rangePercent = $(this).val();
            var id = $(this).attr('id');
         		// $('#slidertext').text(rangePercent);
         		$(this).css('filter', 'hue-rotate(-' + rangePercent + 'deg)');
              console.log(rangePercent);
              writeRangeData(rangePercent, id);

         	  });

         });


          // emoticons
          $("#emotionsarea").emojioneArea({
                   search: false,
                   tones: false,
                   filtersPosition: "bottom",
                   filters: {
                      recent : false, // disable recent
                      animals_nature: false,
                      food_drink: false,
                      objects: false, // disable objects filter
                      symbols: false, // disable symbols filter
                      flags : false, // disable flags filter
                      activity: false,
                      travel_places: false
                    }
              });
         //
         //upload pic
          $('#uploadpic').on('click', function(){
             var files = myDropzone.files
             writePicture(files[0]);
             alert('Thanks, the file has been uploaded! :)');
             });



          //print all
          $('#printall').on('click', function(){
                 window.print();
                 return false;
              });



         //save all
           $('#submitall').on('click', function(){
                 var emotext = $("#emotionsarea")[0].emojioneArea.getText();

                 var name =  $('#name').val();
                 var email =  $('#email').val();
                 var placenow = $('#placenow').val();
                 var lastthoughts = $('#lastthoughts').val();

                 writeEmo(emotext);
                 writeUserData(name, email);
                 writePlaceData(placenow);
                 writeLastThoughts(lastthoughts);
                 // setTimeout(window.location.reload(), 60000);
                 alert('Thanks, your feedback was received :)');
                 });





     });
  </script>

</body>

</html>
